"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[756],{646:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1007:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1264:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},4186:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},4416:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4516:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4616:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4861:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},5793:(e,a,t)=>{t.d(a,{A:()=>b});var r=t(5155),s=t(2115),l=t(1007),o=t(4416),n=t(8136),c=t(646),i=t(4861),d=t(4186),p=t(9420),m=t(1264),u=t(4516),h=t(7434);let g=(0,t(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var x=t(8293);function b(e){let{isOpen:a,onClose:t,onSave:b}=e,[f,y]=(0,s.useState)({name:"",cpfCnpj:"",tipoCliente:"FISICO",phone:"",email:"",endereco:"",cidade:"",cep:"",observacoes:""}),[v,j]=(0,s.useState)({}),[N,C]=(0,s.useState)({status:"vazio",mensagem:"",formatado:""}),[k,w]=(0,s.useState)(!1),[A,I]=(0,s.useState)(null),M=async e=>{if("FISICO"===f.tipoCliente){let a=x.gp.formularios.validarCpfTempoReal(e);return C(a),a.formatado}{let a=x.gp.formatadores.cnpj(e),t=x.gp.validadores.cnpj(a);if(14===a.replace(/\D/g,"").length)try{let e=await x.gp.buscarEmpresaPorCnpj(a);e.success&&e.empresa?(I(e.empresa),C({status:"valido",mensagem:"CNPJ v\xe1lido - Empresa encontrada",formatado:a}),y(a=>({...a,name:e.empresa.razao_social,endereco:"".concat(e.empresa.logradouro,", ").concat(e.empresa.numero),cidade:e.empresa.municipio,cep:e.empresa.cep}))):C({status:"invalido",mensagem:"CNPJ n\xe3o encontrado na Receita Federal",formatado:a})}catch(e){C({status:t?"valido":"invalido",mensagem:t?"CNPJ v\xe1lido":"CNPJ inv\xe1lido",formatado:a})}else a.replace(/\D/g,"").length>0?C({status:"incompleto",mensagem:"".concat(a.replace(/\D/g,"").length,"/14 d\xedgitos"),formatado:a}):C({status:"vazio",mensagem:"",formatado:""});return a}},S=async e=>{let a=x.gp.formatadores.cep(e);if(8===a.replace(/\D/g,"").length){w(!0);try{let e=await x.gp.autocompletarEndereco(a);e.success&&e.endereco&&y(a=>({...a,endereco:e.endereco.logradouro,cidade:e.endereco.cidade}))}catch(e){console.error("Erro ao buscar CEP:",e)}finally{w(!1)}}return a},z=async e=>{e.preventDefault();let a={};if(f.name.trim()||(a.name="Nome \xe9 obrigat\xf3rio"),f.cpfCnpj.trim()||(a.cpfCnpj="CPF/CNPJ \xe9 obrigat\xf3rio"),f.phone.trim()||(a.phone="Telefone \xe9 obrigat\xf3rio"),"valido"!==N.status&&(a.cpfCnpj="CPF/CNPJ inv\xe1lido"),Object.keys(a).length>0)return void j(a);b({id:Date.now().toString(),...f,status:"ATIVO",createdAt:new Date().toISOString().split("T")[0],processosAtivos:0,empresaInfo:A}),y({name:"",cpfCnpj:"",tipoCliente:"FISICO",phone:"",email:"",endereco:"",cidade:"",cep:"",observacoes:""}),j({}),C({status:"vazio",mensagem:"",formatado:""}),I(null),t()};return a?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-blue-100 p-2 rounded-lg",children:(0,r.jsx)(l.A,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Novo Cliente"})]}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(o.A,{className:"w-5 h-5"})})]}),(0,r.jsxs)("form",{onSubmit:z,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Cliente"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"tipoCliente",value:"FISICO",checked:"FISICO"===f.tipoCliente,onChange:e=>{y({...f,tipoCliente:e.target.value,cpfCnpj:""}),C({status:"vazio",mensagem:"",formatado:""}),I(null)},className:"text-blue-600 focus:ring-blue-500"}),(0,r.jsx)(l.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Pessoa F\xedsica"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"tipoCliente",value:"JURIDICO",checked:"JURIDICO"===f.tipoCliente,onChange:e=>{y({...f,tipoCliente:e.target.value,cpfCnpj:""}),C({status:"vazio",mensagem:"",formatado:""}),I(null)},className:"text-blue-600 focus:ring-blue-500"}),(0,r.jsx)(n.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Pessoa Jur\xeddica"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["FISICO"===f.tipoCliente?"Nome Completo":"Raz\xe3o Social"," *"]}),(0,r.jsx)("input",{type:"text",value:f.name,onChange:e=>y({...f,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(v.name?"border-red-300":"border-gray-300"),placeholder:"FISICO"===f.tipoCliente?"Jo\xe3o Silva Santos":"Empresa Ltda"}),v.name&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["FISICO"===f.tipoCliente?"CPF":"CNPJ"," *"]}),(0,r.jsx)("input",{type:"text",value:f.cpfCnpj,onChange:async e=>{let a=await M(e.target.value);y({...f,cpfCnpj:a})},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:border-transparent ".concat(v.cpfCnpj?"border-red-300 focus:ring-red-500":"valido"===N.status?"border-green-300 focus:ring-green-500":"invalido"===N.status?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),placeholder:"FISICO"===f.tipoCliente?"000.000.000-00":"00.000.000/0000-00"}),"vazio"!==N.status&&(0,r.jsxs)("div",{className:"mt-1 text-sm flex items-center gap-1 ".concat("valido"===N.status?"text-green-600":"invalido"===N.status?"text-red-600":"text-gray-600"),children:["valido"===N.status&&(0,r.jsx)(c.A,{className:"w-4 h-4"}),"invalido"===N.status&&(0,r.jsx)(i.A,{className:"w-4 h-4"}),"incompleto"===N.status&&(0,r.jsx)(d.A,{className:"w-4 h-4"}),N.mensagem]}),v.cpfCnpj&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.cpfCnpj})]})]}),A&&(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"font-medium text-green-800 mb-2 flex items-center gap-2",children:[(0,r.jsx)(n.A,{className:"w-4 h-4"}),"Dados da Empresa"]}),(0,r.jsxs)("div",{className:"text-sm text-green-700 space-y-1",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Raz\xe3o Social:"})," ",A.razao_social]}),A.nome_fantasia&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Nome Fantasia:"})," ",A.nome_fantasia]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Situa\xe7\xe3o:"})," ",A.descricao_situacao_cadastral]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Porte:"})," ",A.descricao_porte]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"CNAE:"})," ",A.cnae_fiscal_descricao]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",value:f.phone,onChange:e=>y({...f,phone:(e=>{let a=e.replace(/\D/g,"");return a.length<=10?a.replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d{1,4})/,"$1-$2"):a.replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d{1,4})/,"$1-$2").slice(0,15)})(e.target.value)}),className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(v.phone?"border-red-300":"border-gray-300"),placeholder:"(16) 99999-9999"})]}),v.phone&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.phone})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"email",value:f.email,onChange:e=>y({...f,email:e.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"cliente@email.com"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),"Endere\xe7o"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endere\xe7o Completo"}),(0,r.jsx)("input",{type:"text",value:f.endereco,onChange:e=>y({...f,endereco:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Rua das Flores, 123, Centro"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade"}),(0,r.jsx)("input",{type:"text",value:f.cidade,onChange:e=>y({...f,cidade:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Franca"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:f.cep,onChange:async e=>{let a=await S(e.target.value);y({...f,cep:a})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"14400-000"}),k&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-500",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"})})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observa\xe7\xf5es"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-3 text-gray-400 w-4 h-4"}),(0,r.jsx)("textarea",{value:f.observacoes,onChange:e=>y({...f,observacoes:e.target.value}),rows:3,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Informa\xe7\xf5es adicionais sobre o cliente..."})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,r.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,r.jsx)(g,{className:"w-4 h-4"}),"Salvar Cliente"]})]})]})]})}):null}},7434:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},8136:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},9420:(e,a,t)=>{t.d(a,{A:()=>r});let r=(0,t(9946).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},9946:(e,a,t)=>{t.d(a,{A:()=>c});var r=t(2115);let s=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},l=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:p,...m}=e;return(0,r.createElement)("svg",{ref:a,...o,width:s,height:s,stroke:t,strokeWidth:c?24*Number(n)/Number(s):n,className:l("lucide",i),...!d&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(m)&&{"aria-hidden":"true"},...m},[...p.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(d)?d:[d]])}),c=(e,a)=>{let t=(0,r.forwardRef)((t,o)=>{let{className:c,...i}=t;return(0,r.createElement)(n,{ref:o,iconNode:a,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...i})});return t.displayName=s(e),t}}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8293],{8293:(r,a,o)=>{o.d(a,{gp:()=>u});class t{async buscarCep(r){let a=this.limparCep(r);if(!this.validarCep(a))throw Error("CEP inv\xe1lido. Use o formato 12345678 ou 12345-678");try{let r=await fetch("".concat(this.baseUrl,"/v1/").concat(a));if(!r.ok){if(404===r.status)throw Error("CEP n\xe3o encontrado");throw Error("Erro ao buscar CEP: ".concat(r.statusText))}return await r.json()}catch(r){if(console.error("Erro na consulta de CEP:",r),r instanceof Error)throw r;throw Error("Falha ao consultar CEP")}}async buscarCepV2(r){let a=this.limparCep(r);if(!this.validarCep(a))throw Error("CEP inv\xe1lido. Use o formato 12345678 ou 12345-678");try{let r=await fetch("".concat(this.baseUrl,"/v2/").concat(a));if(!r.ok){if(404===r.status)throw Error("CEP n\xe3o encontrado");throw Error("Erro ao buscar CEP: ".concat(r.statusText))}return await r.json()}catch(r){if(console.error("Erro na consulta de CEP V2:",r),r instanceof Error)throw r;throw Error("Falha ao consultar CEP")}}limparCep(r){return r.replace(/\D/g,"")}validarCep(r){let a=this.limparCep(r);return/^\d{8}$/.test(a)}formatarCep(r){let a=this.limparCep(r);return this.validarCep(a)?"".concat(a.slice(0,5),"-").concat(a.slice(5)):r}montarEnderecoCompleto(r){return[r.street,r.neighborhood,r.city,r.state].filter(Boolean).join(", ")}temCoordenadas(r){var a,o,t,e;return!!((null==(o=r.location)||null==(a=o.coordinates)?void 0:a.latitude)&&(null==(e=r.location)||null==(t=e.coordinates)?void 0:t.longitude))}obterCoordenadas(r){if(!this.temCoordenadas(r))return null;let a=parseFloat(r.location.coordinates.latitude||"0"),o=parseFloat(r.location.coordinates.longitude||"0");return isNaN(a)||isNaN(o)?null:{lat:a,lng:o}}constructor(){this.baseUrl="https://brasilapi.com.br/api/cep"}}let e=new t;class c{async consultarCnpj(r){let a=this.limparCnpj(r);if(!this.validarCnpj(a))throw Error("CNPJ inv\xe1lido. Use o formato 12345678000123");try{let r=await fetch("".concat(this.baseUrl,"/").concat(a));if(!r.ok){if(404===r.status)throw Error("CNPJ n\xe3o encontrado na Receita Federal");throw Error("Erro ao consultar CNPJ: ".concat(r.statusText))}return await r.json()}catch(r){if(console.error("Erro na consulta de CNPJ:",r),r instanceof Error)throw r;throw Error("Falha ao consultar CNPJ")}}limparCnpj(r){return r.replace(/\D/g,"")}validarCnpj(r){let a=this.limparCnpj(r);if(14!==a.length||/^(\d)\1+$/.test(a))return!1;let o=0,t=2;for(let r=11;r>=0;r--)o+=parseInt(a[r])*t,t=9===t?2:t+1;let e=o%11<2?0:11-o%11;if(parseInt(a[12])!==e)return!1;o=0,t=2;for(let r=12;r>=0;r--)o+=parseInt(a[r])*t,t=9===t?2:t+1;let c=o%11<2?0:11-o%11;return parseInt(a[13])===c}formatarCnpj(r){let a=this.limparCnpj(r);return this.validarCnpj(a)?a.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5"):r}montarEnderecoCompleto(r){return[r.descricao_tipo_logradouro&&r.logradouro?"".concat(r.descricao_tipo_logradouro," ").concat(r.logradouro):r.logradouro,r.numero,r.complemento,r.bairro,r.municipio,r.uf,this.formatarCep(r.cep)].filter(Boolean).join(", ")}formatarCep(r){let a=r.replace(/\D/g,"");return 8!==a.length?r:"".concat(a.slice(0,5),"-").concat(a.slice(5))}isEmpresaAtiva(r){return 2===r.situacao_cadastral}isEmpresaMEI(r){return r.opcao_pelo_mei}isEmpresaSimples(r){return r.opcao_pelo_simples}obterTelefonePrincipal(r){if(!r.ddd_telefone_1||!r.telefone_1)return null;let a=r.ddd_telefone_1,o=r.telefone_1;return 8===o.length?"(".concat(a,") ").concat(o.slice(0,4),"-").concat(o.slice(4)):9===o.length?"(".concat(a,") ").concat(o.slice(0,5),"-").concat(o.slice(5)):"(".concat(a,") ").concat(o)}obterIdadeEmpresa(r){let a=new Date(r.data_inicio_atividade);return Math.floor(Math.abs(new Date().getTime()-a.getTime())/31536e6)}formatarCapitalSocial(r){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r)}obterSociosPrincipais(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return r.qsa.sort((r,a)=>a.percentual_capital_social-r.percentual_capital_social).slice(0,a).map(r=>({nome:r.nome_socio,participacao:r.percentual_capital_social,cpfCnpj:r.cnpj_cpf_do_socio}))}constructor(){this.baseUrl="https://brasilapi.com.br/api/cnpj/v1"}}let i=new c;class n{validar(r){let a=this.limparCpf(r);if(!a)return{valido:!1,formatado:"",limpo:"",erro:"CPF n\xe3o informado"};if(11!==a.length)return{valido:!1,formatado:r,limpo:a,erro:"CPF deve ter 11 d\xedgitos"};if(this.todosDigitosIguais(a))return{valido:!1,formatado:this.formatarCpf(a),limpo:a,erro:"CPF inv\xe1lido: todos os d\xedgitos s\xe3o iguais"};let o=this.calcularDigitoVerificador(a);return{valido:o,formatado:this.formatarCpf(a),limpo:a,erro:o?void 0:"CPF inv\xe1lido: d\xedgitos verificadores incorretos"}}formatarCpf(r){let a=this.limparCpf(r);return 11!==a.length?r:a.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}limparCpf(r){return r.replace(/\D/g,"")}gerarCpfTeste(){let r=Array.from({length:9},()=>Math.floor(10*Math.random())).join(""),a=this.calcularPrimeiroDigito(r),o=this.calcularSegundoDigito(r+a);return this.formatarCpf(r+a+o)}obterInfo(r){let a=this.validar(r),o=a.limpo;if(!a.valido)return{cpf:a.formatado,valido:!1,formatado:a.formatado,digito1:0,digito2:0};let t=this.obterEstadoPorDigito(parseInt(o[8]));return{cpf:o,valido:!0,formatado:a.formatado,estado:t.estado,regiao:t.regiao,digito1:parseInt(o[9]),digito2:parseInt(o[10])}}todosDigitosIguais(r){return r.split("").every(a=>a===r[0])}calcularDigitoVerificador(r){let a=r.substring(0,9),o=this.calcularPrimeiroDigito(a),t=this.calcularSegundoDigito(a+o),e=parseInt(r[9]),c=parseInt(r[10]);return o===e&&t===c}calcularPrimeiroDigito(r){let a=0;for(let o=0;o<9;o++)a+=parseInt(r[o])*(10-o);let o=a%11;return o<2?0:11-o}calcularSegundoDigito(r){let a=0;for(let o=0;o<10;o++)a+=parseInt(r[o])*(11-o);let o=a%11;return o<2?0:11-o}obterEstadoPorDigito(r){return({0:{estado:"RS",regiao:"Rio Grande do Sul"},1:{estado:"DF/GO/MS/TO",regiao:"Distrito Federal, Goi\xe1s, Mato Grosso do Sul, Tocantins"},2:{estado:"AC/AM/AP/PA/RO/RR",regiao:"Acre, Amazonas, Amap\xe1, Par\xe1, Rond\xf4nia, Roraima"},3:{estado:"CE/MA/PI",regiao:"Cear\xe1, Maranh\xe3o, Piau\xed"},4:{estado:"AL/PB/PE/RN",regiao:"Alagoas, Para\xedba, Pernambuco, Rio Grande do Norte"},5:{estado:"BA/SE",regiao:"Bahia, Sergipe"},6:{estado:"MG",regiao:"Minas Gerais"},7:{estado:"ES/RJ",regiao:"Esp\xedrito Santo, Rio de Janeiro"},8:{estado:"SP",regiao:"S\xe3o Paulo"},9:{estado:"PR/SC",regiao:"Paran\xe1, Santa Catarina"}})[r]||{estado:"Desconhecido",regiao:"Regi\xe3o n\xe3o identificada"}}validarEmTempoReal(r){let a=this.limparCpf(r);if(!a)return{status:"vazio",mensagem:"Digite o CPF",formatado:""};if(a.length<11)return{status:"incompleto",mensagem:"".concat(a.length,"/11 d\xedgitos"),formatado:this.formatarCpf(a)};let o=this.validar(a);return{status:o.valido?"valido":"invalido",mensagem:o.valido?"CPF v\xe1lido":o.erro||"CPF inv\xe1lido",formatado:o.formatado}}}let s=new n;class l{async getMarcas(r,a){try{let o=new URLSearchParams;a&&o.append("tabela_referencia",a.toString());let t="".concat(this.baseUrl,"/marcas/v1/").concat(r).concat(o.toString()?"?".concat(o):""),e=await fetch(t);if(!e.ok)throw Error("Erro ao buscar marcas: ".concat(e.statusText));return await e.json()}catch(r){throw console.error("Erro na consulta de marcas FIPE:",r),Error("Falha ao consultar marcas na tabela FIPE")}}async getVeiculos(r,a,o){try{let t=new URLSearchParams;o&&t.append("tabela_referencia",o.toString());let e="".concat(this.baseUrl,"/veiculos/v1/").concat(r,"/").concat(a).concat(t.toString()?"?".concat(t):""),c=await fetch(e);if(!c.ok)throw Error("Erro ao buscar ve\xedculos: ".concat(c.statusText));return await c.json()}catch(r){throw console.error("Erro na consulta de ve\xedculos FIPE:",r),Error("Falha ao consultar ve\xedculos na tabela FIPE")}}async getPreco(r,a){try{let o=new URLSearchParams;a&&o.append("tabela_referencia",a.toString());let t="".concat(this.baseUrl,"/preco/v1/").concat(r).concat(o.toString()?"?".concat(o):""),e=await fetch(t);if(!e.ok)throw Error("Erro ao buscar pre\xe7o: ".concat(e.statusText));return await e.json()}catch(r){throw console.error("Erro na consulta de pre\xe7o FIPE:",r),Error("Falha ao consultar pre\xe7o na tabela FIPE")}}async getTabelas(){try{let r="".concat(this.baseUrl,"/tabelas/v1"),a=await fetch(r);if(!a.ok)throw Error("Erro ao buscar tabelas: ".concat(a.statusText));return await a.json()}catch(r){throw console.error("Erro na consulta de tabelas FIPE:",r),Error("Falha ao consultar tabelas FIPE")}}async getBuscaCompleta(r,a,o){try{let t=(await this.getMarcas(r)).find(r=>r.nome.toLowerCase().includes(a.toLowerCase()));if(!t)return{marca:null,veiculo:null,preco:null};let e=(await this.getVeiculos(r,t.codigo)).find(r=>r.nome.toLowerCase().includes(o.toLowerCase()));if(!e)return{marca:t,veiculo:null,preco:null};let c=await this.getPreco(e.codigoFipe);return{marca:t,veiculo:e,preco:c}}catch(r){throw console.error("Erro na busca completa FIPE:",r),Error("Falha na consulta completa FIPE")}}formatarValor(r){let a=parseFloat(r.replace(/[^\d,]/g,"").replace(",","."));return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)}extrairValorNumerico(r){return parseFloat(r.replace(/[^\d,]/g,"").replace(",","."))||0}constructor(){this.baseUrl="https://brasilapi.com.br/api/fipe"}}let p=new l;class d{async validarDado(r){let a=r.replace(/\D/g,"");try{if(8===a.length)try{let a=await this.cep.buscarCep(r);return{tipo:"cep",valido:!0,formatado:this.cep.formatarCep(r),dados:a}}catch(a){return{tipo:"cep",valido:!1,formatado:this.cep.formatarCep(r),erro:"Erro ao buscar CEP: ".concat(a instanceof Error?a.message:"Erro desconhecido")}}if(11===a.length){let a=this.cpf.validar(r);return{tipo:"cpf",valido:a.valido,formatado:a.formatado,dados:a.valido?this.cpf.obterInfo(r):null,erro:a.erro}}{if(14!==a.length)return{tipo:"cep",valido:!1,formatado:r,erro:"Formato n\xe3o reconhecido. Use CEP (8 d\xedgitos), CPF (11 d\xedgitos) ou CNPJ (14 d\xedgitos)"};let o=this.cnpj.validarCnpj(r),t=this.cnpj.formatarCnpj(r);if(!o)return{tipo:"cnpj",valido:!1,formatado:t,erro:"CNPJ inv\xe1lido"};try{let a=await this.cnpj.consultarCnpj(r);return{tipo:"cnpj",valido:!0,formatado:t,dados:a}}catch(r){return{tipo:"cnpj",valido:!1,formatado:t,erro:"Erro ao buscar dados da empresa: ".concat(r instanceof Error?r.message:"Erro desconhecido")}}}}catch(a){return{tipo:"cep",valido:!1,formatado:r,erro:"Erro na valida\xe7\xe3o: ".concat(a instanceof Error?a.message:"Erro desconhecido")}}}async validarCliente(r){let a={valido:!0,erros:[]};try{if(r.cpf){let o=this.cpf.validar(r.cpf);o.valido?a.cpf=this.cpf.obterInfo(r.cpf):(a.erros.push("CPF: ".concat(o.erro)),a.valido=!1)}if(r.cnpj)if(this.cnpj.validarCnpj(r.cnpj))try{a.cnpj=await this.cnpj.consultarCnpj(r.cnpj)}catch(r){a.erros.push("CNPJ: Erro ao buscar dados da empresa"),a.valido=!1}else a.erros.push("CNPJ: CNPJ inv\xe1lido"),a.valido=!1;if(r.cep)try{a.endereco=await this.cep.buscarCep(r.cep)}catch(r){a.erros.push("CEP: Erro ao buscar endere\xe7o"),a.valido=!1}}catch(r){a.erros.push("Erro na valida\xe7\xe3o: ".concat(r instanceof Error?r.message:"Erro desconhecido")),a.valido=!1}return a}async consultarVeiculo(r,a,o){try{let t,e,c=await this.fipe.getBuscaCompleta(r,a,o);if(c.preco&&c.preco.length>0){let r=c.preco[0];t=this.fipe.formatarValor(r.valor),e=this.fipe.extrairValorNumerico(r.valor)}return{...c,valorFormatado:t,valorNumerico:e}}catch(r){return console.error("Erro na consulta veicular:",r),{marca:null,veiculo:null,preco:null}}}async autocompletarEndereco(r){try{let a=await this.cep.buscarCep(r);return{success:!0,endereco:{logradouro:a.street||"",bairro:a.neighborhood||"",cidade:a.city||"",estado:a.state||"",cep:a.cep||""}}}catch(r){return{success:!1,erro:"Erro ao buscar endere\xe7o: ".concat(r instanceof Error?r.message:"Erro desconhecido")}}}async buscarEmpresaPorCnpj(r){try{if(!this.cnpj.validarCnpj(r))return{success:!1,erro:"CNPJ inv\xe1lido"};let a=await this.cnpj.consultarCnpj(r);return{success:!0,empresa:a}}catch(r){return{success:!1,erro:"Erro ao buscar empresa: ".concat(r instanceof Error?r.message:"Erro desconhecido")}}}constructor(){this.cep=e,this.cnpj=i,this.cpf=s,this.fipe=p,this.formatadores={cpf:r=>this.cpf.formatarCpf(r),cnpj:r=>this.cnpj.formatarCnpj(r),cep:r=>this.cep.formatarCep(r),valor:r=>this.fipe.formatarValor(r),limpar:r=>r.replace(/\D/g,""),detectarTipo:r=>{let a=r.replace(/\D/g,"");return 11===a.length?"cpf":14===a.length?"cnpj":8===a.length?"cep":"desconhecido"}},this.validadores={cpf:r=>this.cpf.validar(r).valido,cep:async r=>{try{return await this.cep.buscarCep(r),!0}catch(r){return!1}},cnpj:r=>this.cnpj.validarCnpj(r)},this.formularios={mascaraCpf:r=>this.cpf.formatarCpf(r),mascaraCnpj:r=>this.cnpj.formatarCnpj(r),mascaraCep:r=>this.cep.formatarCep(r),validarCpfTempoReal:r=>this.cpf.validarEmTempoReal(r),autoFormatar:r=>{switch(this.formatadores.detectarTipo(r)){case"cpf":return this.formatadores.cpf(r);case"cnpj":return this.formatadores.cnpj(r);case"cep":return this.formatadores.cep(r);default:return r}}}}}let u=new d}}]);
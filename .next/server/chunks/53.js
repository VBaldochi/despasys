"use strict";exports.id=53,exports.ids=[53],exports.modules={41550:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},48730:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},79053:(a,b,c)=>{c.d(b,{A:()=>r});var d=c(60687),e=c(43210),f=c(58869),g=c(11860),h=c(79410),i=c(5336),j=c(35071),k=c(48730),l=c(48340),m=c(41550),n=c(97992),o=c(10022);let p=(0,c(62688).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var q=c(90902);function r({isOpen:a,onClose:b,onSave:c}){let[r,s]=(0,e.useState)({name:"",cpfCnpj:"",tipoCliente:"FISICO",phone:"",email:"",endereco:"",cidade:"",cep:"",observacoes:""}),[t,u]=(0,e.useState)({}),[v,w]=(0,e.useState)({status:"vazio",mensagem:"",formatado:""}),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(null),B=async a=>{if("FISICO"===r.tipoCliente){let b=q.gp.formularios.validarCpfTempoReal(a);return w(b),b.formatado}{let b=q.gp.formatadores.cnpj(a),c=q.gp.validadores.cnpj(b);if(14===b.replace(/\D/g,"").length)try{let a=await q.gp.buscarEmpresaPorCnpj(b);a.success&&a.empresa?(A(a.empresa),w({status:"valido",mensagem:"CNPJ v\xe1lido - Empresa encontrada",formatado:b}),s(b=>({...b,name:a.empresa.razao_social,endereco:`${a.empresa.logradouro}, ${a.empresa.numero}`,cidade:a.empresa.municipio,cep:a.empresa.cep}))):w({status:"invalido",mensagem:"CNPJ n\xe3o encontrado na Receita Federal",formatado:b})}catch(a){w({status:c?"valido":"invalido",mensagem:c?"CNPJ v\xe1lido":"CNPJ inv\xe1lido",formatado:b})}else b.replace(/\D/g,"").length>0?w({status:"incompleto",mensagem:`${b.replace(/\D/g,"").length}/14 d\xedgitos`,formatado:b}):w({status:"vazio",mensagem:"",formatado:""});return b}},C=async a=>{let b=q.gp.formatadores.cep(a);if(8===b.replace(/\D/g,"").length){y(!0);try{let a=await q.gp.autocompletarEndereco(b);a.success&&a.endereco&&s(b=>({...b,endereco:a.endereco.logradouro,cidade:a.endereco.cidade}))}catch(a){console.error("Erro ao buscar CEP:",a)}finally{y(!1)}}return b},D=async a=>{a.preventDefault();let d={};if(r.name.trim()||(d.name="Nome \xe9 obrigat\xf3rio"),r.cpfCnpj.trim()||(d.cpfCnpj="CPF/CNPJ \xe9 obrigat\xf3rio"),r.phone.trim()||(d.phone="Telefone \xe9 obrigat\xf3rio"),"valido"!==v.status&&(d.cpfCnpj="CPF/CNPJ inv\xe1lido"),Object.keys(d).length>0)return void u(d);c({id:Date.now().toString(),...r,status:"ATIVO",createdAt:new Date().toISOString().split("T")[0],processosAtivos:0,empresaInfo:z}),s({name:"",cpfCnpj:"",tipoCliente:"FISICO",phone:"",email:"",endereco:"",cidade:"",cep:"",observacoes:""}),u({}),w({status:"vazio",mensagem:"",formatado:""}),A(null),b()};return a?(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"bg-blue-100 p-2 rounded-lg",children:(0,d.jsx)(f.A,{className:"w-5 h-5 text-blue-600"})}),(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Novo Cliente"})]}),(0,d.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,d.jsx)(g.A,{className:"w-5 h-5"})})]}),(0,d.jsxs)("form",{onSubmit:D,className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Cliente"}),(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,d.jsx)("input",{type:"radio",name:"tipoCliente",value:"FISICO",checked:"FISICO"===r.tipoCliente,onChange:a=>{s({...r,tipoCliente:a.target.value,cpfCnpj:""}),w({status:"vazio",mensagem:"",formatado:""}),A(null)},className:"text-blue-600 focus:ring-blue-500"}),(0,d.jsx)(f.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Pessoa F\xedsica"})]}),(0,d.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,d.jsx)("input",{type:"radio",name:"tipoCliente",value:"JURIDICO",checked:"JURIDICO"===r.tipoCliente,onChange:a=>{s({...r,tipoCliente:a.target.value,cpfCnpj:""}),w({status:"vazio",mensagem:"",formatado:""}),A(null)},className:"text-blue-600 focus:ring-blue-500"}),(0,d.jsx)(h.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Pessoa Jur\xeddica"})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["FISICO"===r.tipoCliente?"Nome Completo":"Raz\xe3o Social"," *"]}),(0,d.jsx)("input",{type:"text",value:r.name,onChange:a=>s({...r,name:a.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.name?"border-red-300":"border-gray-300"}`,placeholder:"FISICO"===r.tipoCliente?"Jo\xe3o Silva Santos":"Empresa Ltda"}),t.name&&(0,d.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.name})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["FISICO"===r.tipoCliente?"CPF":"CNPJ"," *"]}),(0,d.jsx)("input",{type:"text",value:r.cpfCnpj,onChange:async a=>{let b=await B(a.target.value);s({...r,cpfCnpj:b})},className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:border-transparent ${t.cpfCnpj?"border-red-300 focus:ring-red-500":"valido"===v.status?"border-green-300 focus:ring-green-500":"invalido"===v.status?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"FISICO"===r.tipoCliente?"000.000.000-00":"00.000.000/0000-00"}),"vazio"!==v.status&&(0,d.jsxs)("div",{className:`mt-1 text-sm flex items-center gap-1 ${"valido"===v.status?"text-green-600":"invalido"===v.status?"text-red-600":"text-gray-600"}`,children:["valido"===v.status&&(0,d.jsx)(i.A,{className:"w-4 h-4"}),"invalido"===v.status&&(0,d.jsx)(j.A,{className:"w-4 h-4"}),"incompleto"===v.status&&(0,d.jsx)(k.A,{className:"w-4 h-4"}),v.mensagem]}),t.cpfCnpj&&(0,d.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.cpfCnpj})]})]}),z&&(0,d.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,d.jsxs)("h4",{className:"font-medium text-green-800 mb-2 flex items-center gap-2",children:[(0,d.jsx)(h.A,{className:"w-4 h-4"}),"Dados da Empresa"]}),(0,d.jsxs)("div",{className:"text-sm text-green-700 space-y-1",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Raz\xe3o Social:"})," ",z.razao_social]}),z.nome_fantasia&&(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Nome Fantasia:"})," ",z.nome_fantasia]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Situa\xe7\xe3o:"})," ",z.descricao_situacao_cadastral]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Porte:"})," ",z.descricao_porte]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"CNAE:"})," ",z.cnae_fiscal_descricao]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,d.jsx)("input",{type:"text",value:r.phone,onChange:a=>s({...r,phone:(a=>{let b=a.replace(/\D/g,"");return b.length<=10?b.replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4})(\d{1,4})/,"$1-$2"):b.replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d{1,4})/,"$1-$2").slice(0,15)})(a.target.value)}),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.phone?"border-red-300":"border-gray-300"}`,placeholder:"(16) 99999-9999"})]}),t.phone&&(0,d.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.phone})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,d.jsx)("input",{type:"email",value:r.email,onChange:a=>s({...r,email:a.target.value}),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"cliente@email.com"})]})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[(0,d.jsx)(n.A,{className:"w-4 h-4"}),"Endere\xe7o"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endere\xe7o Completo"}),(0,d.jsx)("input",{type:"text",value:r.endereco,onChange:a=>s({...r,endereco:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Rua das Flores, 123, Centro"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade"}),(0,d.jsx)("input",{type:"text",value:r.cidade,onChange:a=>s({...r,cidade:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Franca"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{type:"text",value:r.cep,onChange:async a=>{let b=await C(a.target.value);s({...r,cep:b})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"14400-000"}),x&&(0,d.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-500",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"})})]})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observa\xe7\xf5es"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(o.A,{className:"absolute left-3 top-3 text-gray-400 w-4 h-4"}),(0,d.jsx)("textarea",{value:r.observacoes,onChange:a=>s({...r,observacoes:a.target.value}),rows:3,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Informa\xe7\xf5es adicionais sobre o cliente..."})]})]}),(0,d.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-200",children:[(0,d.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,d.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,d.jsx)(p,{className:"w-4 h-4"}),"Salvar Cliente"]})]})]})]})}):null}},79410:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},97992:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])}};
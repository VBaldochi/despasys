{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\n\nexport async function middleware(request: NextRequest) {\n  const url = request.nextUrl.clone()\n  \n  // Extrair tenant do query param ou usar 'demo' como padrão\n  let tenantDomain = request.nextUrl.searchParams.get('tenant')\n  \n  if (!tenantDomain) {\n    // Para desenvolvimento, usar 'demo' como padrão\n    tenantDomain = 'demo'\n  }\n\n  // Rotas que não precisam de tenant ou autenticação\n  const publicRoutes = [\n    '/api/health',\n    '/api/auth',\n    '/api/tenant',\n    '/auth/login',\n    '/auth/error',\n    '/select-tenant',\n    '/login',\n    '/register',\n    '/_next',\n    '/favicon.ico',\n    '/manifest.json',\n    '/sw.js'\n  ]\n\n  const isPublicRoute = publicRoutes.some(route => \n    request.nextUrl.pathname.startsWith(route)\n  )\n\n  if (isPublicRoute) {\n    return NextResponse.next()\n  }\n\n  // Minimizar headers para melhor performance\n  const requestHeaders = new Headers(request.headers)\n  requestHeaders.set('x-tenant-domain', tenantDomain)\n\n  const response = NextResponse.next({\n    request: {\n      headers: requestHeaders,\n    },\n  })\n\n  // Cache headers para recursos estáticos\n  if (request.nextUrl.pathname.includes('/_next/static/')) {\n    response.headers.set('Cache-Control', 'public, max-age=31536000, immutable')\n  }\n\n  return response\n}\n\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except for the ones starting with:\n     * - api (API routes)\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     */\n    '/((?!api/health|api/auth|_next/static|_next/image|favicon.ico).*)',\n  ],\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,eAAe,WAAW,OAAoB;IACnD,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;IAEjC,2DAA2D;IAC3D,IAAI,eAAe,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAEpD,IAAI,CAAC,cAAc;QACjB,gDAAgD;QAChD,eAAe;IACjB;IAEA,mDAAmD;IACnD,MAAM,eAAe;QACnB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,gBAAgB,aAAa,IAAI,CAAC,CAAA,QACtC,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IAGtC,IAAI,eAAe;QACjB,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;IAC1B;IAEA,4CAA4C;IAC5C,MAAM,iBAAiB,IAAI,QAAQ,QAAQ,OAAO;IAClD,eAAe,GAAG,CAAC,mBAAmB;IAEtC,MAAM,WAAW,6LAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QACjC,SAAS;YACP,SAAS;QACX;IACF;IAEA,wCAAwC;IACxC,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,mBAAmB;QACvD,SAAS,OAAO,CAAC,GAAG,CAAC,iBAAiB;IACxC;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;KAMC,GACD;KACD;AACH"}}]
}